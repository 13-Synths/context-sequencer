#N canvas 67 358 450 298 10;
#X declare -path ../;
#X obj 151 25 shared ctxfiles/launch-share;
#X msg 68 193 vis 1;
#X obj 68 215 iemguts/sendcanvas;
#X obj 68 171 receive lshare;
#X obj 68 149 array define dummy@%G 1;
#N canvas 67 87 1299 681 messages 0;
#X obj 134 73 receive YYh&&8(v;
#X obj 201 117 t b a;
#X obj 85 178 cyclone/zl iter 1;
#X msg 320 30 symbol  ;
#X obj 134 95 route bang;
#X obj 893 164 ctxfiles/recompile \$0 lothr;
#X obj 85 199 ctxfiles/br2 route 1 \; :1f0 gtfs \$0 #f 1f0 :s \; :1f1
gtfs \$0 #f 1f1 :ss \; :1f2 gtfs \$0 #f 1f2 -send 2 \; :1f3 gtfs \$0
#f 1f3 -send 3 \; :1f4 gtfs \$0 #f 1f4 :u \; :1f5 gtfs \$0 #f 1f5
find \; :1f6 gtfs \$0 #f 1f6 :r \; :1f7 gtfs \$0 #f 1f7 copy ~ ID
\; :2f0 gtfs \$0 #f 2f0 :s \; :2f1 gtfs \$0 #f 2f1 :ss \; :2f2 gtfs
\$0 #f 2f2 :i << \; :2f3 gtfs \$0 #f 2f3 :i >> \; :2f4 gtfs \$0 #f
2f4 :u \; :2f5 gtfs \$0 #f 2f5 find \; :2f6 gtfs \$0 #f 2f6 :r \; :2f7
gtfs \$0 #f 2f7 -n :x clear :i clear :r -source c % -messages 1 -prepend <i -floats -c % -floatprep 1 -trigger 1 -first 1
\; :3f0 gtfs \$0 #f 3f0 chromatic \; :3f1 gtfs \$0 #f 3f1 major \;
:3f2 gtfs \$0 #f 3f2 minor \; :3f3 gtfs \$0 #f 3f3 pentatonic major
\; :3f4 gtfs \$0 #f 3f4 pentatonic minor \; :3f5 gtfs \$0 #f 3f5 blues major
\; :3f6 gtfs \$0 #f 3f6 blues minor \; :3f7 gtfs \$0 #f 3f7 custom1
\; :4f0 gtfs \$0 #f 4f0 120000 \; :4f1 gtfs \$0 #f 4f1 60000 \; :4f2
gtfs \$0 #f 4f2 30000 \; :4f3 gtfs \$0 #f 4f3 10000 \; :4f4 gtfs \$0
#f 4f4 3000 \; :4f5 gtfs \$0 #f 4f5 1000 \; :4f6 gtfs \$0 #f 4f6 500
\; :4f7 gtfs \$0 #f 4f7 1 \; :qu gtfs \$0 #f qu 0 \, :quantize #l \;
:gui gtfs \$0 #f gui 0 \, :GUI #l \; :sa gtfs \$0 #f sa 1 \; :ac gtfs
\$0 #f ac 0 \; :m1 gtfs \$0 #f m1 bang \; :tx gtfs \$0 #f tx 0 \; buffer
gtfs \$0 #f buffer 20 \; loadproperties tf \$0 #f \; ## s \$0-lothr
, f 134;
#X obj 893 187 ctxfiles/br2 demux 2 \; #f t \; #f gs :1f0 \; #f gs
:1f1 \; #f gs :1f2 \; #f gs :1f3 \; #f gs :1f4 \; #f gs :1f5 \; #f
gs :1f6 \; #f gs :1f7 \; #f gs :2f0 \; #f gs :2f1 \; #f gs :2f2 \;
#f gs :2f3 \; #f gs :2f4 \; #f gs :2f5 \; #f gs :2f6 \; #f gs :2f7
\; #f gs :3f0 \; #f gs :3f1 \; #f gs :3f2 \; #f gs :3f3 \; #f gs :3f4
\; #f gs :3f5 \; #f gs :3f6 \; #f gs :3f7 \; #f gs :4f0 \; #f gs :4f1
\; #f gs :4f2 \; #f gs :4f3 \; #f gs :4f4 \; #f gs :4f5 \; #f gs :4f6
\; #f gs :4f7 \; #f gs :qu \; #f gs :gui \; #f gs :sa \; #f gs :ac
\; #f gs :m1 \; #f gs :tx \; #f s buffertime%^% \; #f gs propload;
#X connect 0 0 4 0;
#X connect 1 0 5 0;
#X connect 1 1 2 0;
#X connect 2 0 6 0;
#X connect 4 1 1 0;
#X connect 5 0 7 0;
#X connect 5 1 7 1;
#X restore 301 215 pd messages;
#N canvas 67 87 450 300 scales 0;
#X obj 231 44 receive RRfBB%6;
#X msg 231 113 read scales.txt;
#X obj 231 138 text define gridscales%%;
#X obj 231 66 spigot 1;
#X obj 231 88 t b f;
#X connect 0 0 3 0;
#X connect 1 0 2 0;
#X connect 3 0 4 0;
#X connect 4 0 1 0;
#X connect 4 1 3 1;
#X restore 301 193 pd scales;
#N canvas 335 173 804 505 id 0;
#X obj 262 307 f -1;
#X obj 262 330 makefilename %i-masteron&&;
#X obj 188 379 send;
#X obj 225 307 t f;
#X obj 188 307 f 1;
#X obj 188 224 receive masteronto&&;
#X obj 188 253 spigot 1;
#X obj 371 243 t f;
#X obj 371 274 del 250;
#X obj 371 296 f 1;
#X obj 188 277 t b f b f b b b f;
#X obj 268 49 max;
#X obj 268 71 t f f;
#X msg 268 116 resize \$1;
#X obj 268 93 change;
#X obj 268 138 array define grd%-IDshare 1;
#X obj 268 27 receive grd%-IDsharer;
#X obj 288 161 array define grd%-colshare 1;
#X obj 585 113 f -1;
#X obj 556 88 f 1;
#X obj 556 65 receive updub###;
#X obj 585 88 receive downdub###;
#X obj 585 213 until;
#X obj 585 190 f 1e+07;
#X obj 585 237 f;
#X obj 585 260 +;
#X obj 585 307 mod;
#X obj 612 307 div;
#X obj 612 330 abs;
#X obj 612 353 moses 2;
#X obj 651 376 t b;
#X obj 612 447 t f b;
#X obj 585 283 t f f f;
#X obj 585 400 tabread grd%-IDshare;
#X obj 585 423 sel 0;
#X obj 568 163 t b b f b;
#X obj 568 139 spigot 1;
#X obj 670 165 f 1;
#X obj 669 139 t f;
#X obj 469 267 - 1;
#X connect 0 0 1 0;
#X connect 1 0 2 1;
#X connect 3 0 2 0;
#X connect 4 0 2 0;
#X connect 5 0 6 0;
#X connect 6 0 10 0;
#X connect 7 0 6 1;
#X connect 8 0 9 0;
#X connect 9 0 6 1;
#X connect 10 0 4 0;
#X connect 10 1 1 0;
#X connect 10 2 3 0;
#X connect 10 3 0 1;
#X connect 10 4 0 0;
#X connect 10 5 8 0;
#X connect 10 6 7 0;
#X connect 10 7 39 0;
#X connect 11 0 12 0;
#X connect 12 0 14 0;
#X connect 12 1 11 1;
#X connect 13 0 15 0;
#X connect 13 0 17 0;
#X connect 14 0 13 0;
#X connect 14 0 26 1;
#X connect 14 0 27 1;
#X connect 16 0 11 0;
#X connect 18 0 36 0;
#X connect 19 0 36 0;
#X connect 20 0 19 0;
#X connect 21 0 18 0;
#X connect 22 0 24 0;
#X connect 23 0 22 0;
#X connect 24 0 25 0;
#X connect 25 0 32 0;
#X connect 26 0 33 0;
#X connect 27 0 28 0;
#X connect 28 0 29 0;
#X connect 29 1 30 0;
#X connect 30 0 22 1;
#X connect 31 0 6 0;
#X connect 31 1 22 1;
#X connect 32 0 26 0;
#X connect 32 1 27 0;
#X connect 32 2 24 1;
#X connect 33 0 34 0;
#X connect 34 1 31 0;
#X connect 35 0 37 0;
#X connect 35 1 23 0;
#X connect 35 2 25 1;
#X connect 35 3 38 0;
#X connect 36 0 35 0;
#X connect 37 0 36 1;
#X connect 38 0 36 1;
#X connect 39 0 24 1;
#X restore 301 237 pd id;
#X obj 152 46 declare -path ../;
#N canvas 67 165 620 558 MIDI 0;
#X obj 179 79 text define control-layout^^&;
#X obj 99 107 until;
#X obj 99 153 t f f;
#X obj 99 199 text get control-layout^^&;
#X obj 126 176 text delete control-layout^^&;
#X obj 99 222 list trim;
#X obj 140 8 loadbang;
#X obj 243 331 s sysExH&&;
#X obj 156 356 s buffertime%^%;
#X obj 99 246 route bang;
#X obj 156 294 route buffer-time: SysEx-header: Force-SysEx-when-possible:
--------------------------------------------;
#X obj 156 270 spigot 1;
#X obj 419 336 t b;
#X obj 419 359 t f;
#X obj 331 399 unpack f s f s f s f s f s f s f s f;
#X obj 331 515 s force%%T%;
#X obj 361 492 s LED&UU**;
#X obj 391 469 s flashRR$$;
#X obj 422 448 s pulseGGB^;
#X obj 140 31 t b f b;
#X obj 159 108 text get control-layout^^& 1 1;
#X obj 159 136 s ctl((*(;
#X msg 179 56 read MIDI-setup.txt;
#X obj 99 130 f 10;
#X connect 1 0 23 0;
#X connect 2 0 3 0;
#X connect 2 1 4 0;
#X connect 3 0 5 0;
#X connect 5 0 9 0;
#X connect 6 0 19 0;
#X connect 9 0 1 1;
#X connect 9 1 11 0;
#X connect 10 0 8 0;
#X connect 10 1 7 0;
#X connect 10 2 14 0;
#X connect 10 3 12 0;
#X connect 11 0 10 0;
#X connect 12 0 13 0;
#X connect 13 0 11 1;
#X connect 14 0 15 0;
#X connect 14 2 16 0;
#X connect 14 4 17 0;
#X connect 14 6 18 0;
#X connect 19 0 1 0;
#X connect 19 1 20 0;
#X connect 19 2 22 0;
#X connect 20 0 21 0;
#X connect 22 0 0 0;
#X connect 23 0 2 0;
#X restore 301 171 pd MIDI text;
#X obj 68 125 array define -k padd(())) 8;
#A 0 -0.5 0 0 0 0 0 0 0;
#X obj 68 103 array define padd2(())) 8;
#N canvas 357 121 576 539 MIDI 1;
#X obj 286 137 makefilename %d-midiin;
#X obj 286 112 receive masterd0((;
#X obj 201 132 notein 1;
#X obj 201 155 pack;
#X obj 201 178 send;
#X obj 202 202 ctlin;
#X obj 202 268 send;
#X obj 223 232 makefilename %d-ctl((();
#X obj 202 295 clone 16 ctl-send;
#X obj 202 318 unpack;
#X obj 202 390 >= 8;
#X obj 229 367 mod 8;
#X obj 202 342 t f f;
#X obj 202 423 pack f f f f;
#X msg 202 446 \; \$4-ctlin-\$1 \$3 \$2;
#X obj 397 365 receive 0-ctlin-0;
#X obj 397 385 receive 0-ctlin-1;
#X text 344 341 dummies to prevent error message;
#X connect 0 0 4 1;
#X connect 1 0 0 0;
#X connect 1 0 13 3;
#X connect 2 0 3 0;
#X connect 2 1 3 1;
#X connect 3 0 4 0;
#X connect 5 0 6 0;
#X connect 5 1 7 0;
#X connect 7 0 6 1;
#X connect 8 0 9 0;
#X connect 9 0 12 0;
#X connect 9 1 13 2;
#X connect 10 0 13 0;
#X connect 11 0 13 1;
#X connect 12 0 10 0;
#X connect 12 1 11 0;
#X connect 13 0 14 0;
#X restore 301 127 pd MIDI in;
#N canvas 67 89 905 679 MIDI 0;
#X obj 96 -44 receive cellbuff*u(i;
#X obj 111 -91 receive cellbuff*u(i-1;
#X obj 111 -68 cyclone/zl rot 1;
#X obj 180 178 sel -1;
#X obj 180 204 f 1e+07;
#X obj 160 269 text set cellbuff((();
#X msg 324 466 clear;
#X obj 324 489 text define cellbuff((();
#X obj 168 691 change;
#X msg 364 466 set 0;
#X obj 141 667 t l f;
#X obj 141 719 list split 1;
#X text 348 289 CHANNELS \; 10 = colour on/off (cell \, colour) \;
35 = flash (cell \, colour) \; 40 = pulse (cell \, colour) \; 4 = sysex
(whatever);
#X obj 308 835 receive sysExH&&;
#X obj 294 -121 receive clearU*UI*;
#X obj 294 -98 t b b;
#X obj 261 -64 pack 14 0;
#X obj 21 -114 receive cellbuff*u(i-2;
#X obj 141 364 text sequence cellbuff((() -w 1;
#X msg 141 340 line 0 \, auto;
#X obj 180 125 text search cellbuff((() 2;
#X obj 348 20 receive buffertime%^%;
#X obj 141 316 spigot 1;
#X obj 375 438 f 1;
#X obj 186 292 t f;
#X obj 114 422 demux;
#X obj 141 396 receive force%%T%;
#X obj 12 487 cyclone/zl rot -1;
#X obj 141 463 unpack f f f;
#X obj 141 641 pack f f f;
#X obj 141 486 sel 1 2 3;
#X obj 141 572 f 10;
#X obj 174 572 f 35;
#X obj 206 573 f 40;
#X obj 162 509 receive LED&UU**;
#X obj 195 530 receive flashRR$$;
#X obj 227 551 receive pulseGGB^;
#X obj 12 462 else/routeall 1 2 3;
#X obj 12 653 demux;
#X obj 12 766 noteout;
#X obj 39 728 ctlout;
#X obj 39 630 >=;
#X obj 54 604 receive ctl((*(;
#X obj 39 678 unpack f f f;
#X obj 39 701 swap;
#X obj 12 560 t l f b;
#X obj 100 805 spigot;
#X obj 175 929 midiout;
#X obj 100 828 t b b;
#X obj 65 821 t f;
#X obj 324 412 t b b b b;
#X obj 185 861 list 240 0 32 41 2 24;
#X obj 175 906 t a a;
#X obj 100 860 f 247;
#X obj 168 769 t f b b b;
#X obj 202 797 f 1;
#X obj 147 3 unpack;
#X obj 259 43 sel 0;
#X obj 300 43 t f b;
#X obj 232 -6 t b f;
#X obj 244 98 f;
#X obj 21 -91 t b b l b f;
#X obj 259 66 f 20;
#X obj 327 65 f 40;
#X obj 348 43 * 2;
#X obj 96 -20 t b b l l f;
#X obj 259 20 > 3;
#X obj 180 152 demux;
#X obj 224 178 t b;
#X msg 321 -64 all 0;
#X obj 321 -28 clone ctlbuff 80;
#X obj 160 242 list prepend 20;
#X connect 0 0 65 0;
#X connect 1 0 2 0;
#X connect 2 0 65 0;
#X connect 3 0 4 0;
#X connect 3 1 5 1;
#X connect 4 0 5 1;
#X connect 6 0 7 0;
#X connect 8 0 54 0;
#X connect 9 0 8 0;
#X connect 10 0 11 0;
#X connect 10 1 8 0;
#X connect 11 1 52 0;
#X connect 13 0 51 1;
#X connect 14 0 15 0;
#X connect 15 0 16 0;
#X connect 15 1 69 0;
#X connect 16 0 65 0;
#X connect 17 0 61 0;
#X connect 18 0 25 0;
#X connect 18 2 50 0;
#X connect 19 0 18 0;
#X connect 20 0 67 0;
#X connect 21 0 62 1;
#X connect 21 0 64 0;
#X connect 22 0 19 0;
#X connect 23 0 22 1;
#X connect 24 0 22 1;
#X connect 25 0 37 0;
#X connect 25 1 28 0;
#X connect 26 0 25 1;
#X connect 27 0 45 0;
#X connect 28 0 30 0;
#X connect 28 1 29 1;
#X connect 28 2 29 2;
#X connect 29 0 10 0;
#X connect 30 0 31 0;
#X connect 30 1 32 0;
#X connect 30 2 33 0;
#X connect 30 3 29 0;
#X connect 31 0 29 0;
#X connect 32 0 29 0;
#X connect 33 0 29 0;
#X connect 34 0 31 1;
#X connect 35 0 32 1;
#X connect 36 0 33 1;
#X connect 37 0 27 0;
#X connect 37 1 27 0;
#X connect 37 2 27 0;
#X connect 37 3 10 0;
#X connect 38 0 39 0;
#X connect 38 1 43 0;
#X connect 41 0 38 1;
#X connect 42 0 41 1;
#X connect 43 0 44 0;
#X connect 43 1 44 1;
#X connect 43 2 40 2;
#X connect 44 0 40 0;
#X connect 44 1 40 1;
#X connect 45 0 38 0;
#X connect 45 1 41 0;
#X connect 45 2 46 0;
#X connect 46 0 48 0;
#X connect 48 0 53 0;
#X connect 48 1 49 0;
#X connect 49 0 46 1;
#X connect 50 0 6 0;
#X connect 50 1 46 0;
#X connect 50 2 9 0;
#X connect 50 3 23 0;
#X connect 51 0 52 0;
#X connect 52 0 47 0;
#X connect 53 0 52 0;
#X connect 54 0 52 0;
#X connect 54 1 51 0;
#X connect 54 2 55 0;
#X connect 54 3 46 0;
#X connect 55 0 46 1;
#X connect 56 1 20 0;
#X connect 57 0 62 0;
#X connect 57 1 58 0;
#X connect 58 0 57 1;
#X connect 58 1 63 0;
#X connect 59 0 60 0;
#X connect 59 1 66 0;
#X connect 60 0 71 1;
#X connect 61 0 24 0;
#X connect 61 1 22 0;
#X connect 61 2 71 0;
#X connect 61 3 4 0;
#X connect 61 4 59 0;
#X connect 62 0 60 1;
#X connect 63 0 60 1;
#X connect 64 0 63 1;
#X connect 65 0 24 0;
#X connect 65 1 22 0;
#X connect 65 2 71 0;
#X connect 65 3 56 0;
#X connect 65 4 59 0;
#X connect 66 0 57 0;
#X connect 66 0 67 1;
#X connect 67 0 3 0;
#X connect 67 1 68 0;
#X connect 68 0 4 0;
#X connect 69 0 70 0;
#X connect 71 0 5 0;
#X restore 301 149 pd MIDI out;
#X connect 1 0 2 0;
#X connect 3 0 1 0;
